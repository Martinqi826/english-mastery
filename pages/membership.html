<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ä¼šå‘˜ä¸­å¿ƒ - English Mastery</title>
  <link rel="stylesheet" href="../css/styles.css">
  <style>
    /* ä¼šå‘˜é¡µé¢ç‰¹å®šæ ·å¼ */
    .membership-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 40px 20px;
    }

    .membership-header {
      text-align: center;
      margin-bottom: 60px;
    }

    .membership-header h1 {
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 16px;
      color: #1a1a1a;
    }

    .membership-header p {
      font-size: 1.1rem;
      color: #666;
      max-width: 600px;
      margin: 0 auto;
    }

    /* å½“å‰ä¼šå‘˜çŠ¶æ€å¡ç‰‡ */
    .current-membership {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border-radius: 24px;
      padding: 40px;
      margin-bottom: 60px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 20px;
    }

    .current-membership.free {
      background: linear-gradient(135deg, #868686 0%, #4a4a4a 100%);
    }

    .current-membership.basic {
      background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
    }

    .current-membership.premium {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    }

    .membership-info h2 {
      font-size: 1.8rem;
      margin-bottom: 8px;
    }

    .membership-info p {
      opacity: 0.9;
      font-size: 1rem;
    }

    .membership-badge {
      background: rgba(255,255,255,0.2);
      padding: 12px 24px;
      border-radius: 50px;
      font-weight: 600;
      font-size: 1.1rem;
    }

    /* å¥—é¤é€‰æ‹© */
    .plans-section h2 {
      text-align: center;
      font-size: 2rem;
      margin-bottom: 40px;
      color: #1a1a1a;
    }

    .plans-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 24px;
      margin-bottom: 60px;
    }

    .plan-card {
      background: white;
      border: 2px solid #e5e5e5;
      border-radius: 20px;
      padding: 32px;
      text-align: center;
      transition: all 0.3s ease;
      position: relative;
    }

    .plan-card:hover {
      border-color: #1a1a1a;
      transform: translateY(-4px);
      box-shadow: 0 12px 40px rgba(0,0,0,0.1);
    }

    .plan-card.popular {
      border-color: #1a1a1a;
      background: #fafafa;
    }

    .plan-card.popular::before {
      content: 'æœ€å—æ¬¢è¿';
      position: absolute;
      top: -12px;
      left: 50%;
      transform: translateX(-50%);
      background: #1a1a1a;
      color: white;
      padding: 6px 16px;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: 600;
    }

    .plan-name {
      font-size: 1.4rem;
      font-weight: 700;
      margin-bottom: 8px;
      color: #1a1a1a;
    }

    .plan-price {
      margin: 24px 0;
    }

    .plan-price .amount {
      font-size: 3rem;
      font-weight: 700;
      color: #1a1a1a;
    }

    .plan-price .currency {
      font-size: 1.2rem;
      vertical-align: top;
    }

    .plan-price .period {
      color: #666;
      font-size: 1rem;
    }

    .plan-price .original {
      text-decoration: line-through;
      color: #999;
      font-size: 1rem;
      margin-top: 4px;
    }

    .plan-features {
      list-style: none;
      padding: 0;
      margin: 24px 0;
      text-align: left;
    }

    .plan-features li {
      padding: 10px 0;
      border-bottom: 1px solid #f0f0f0;
      color: #444;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .plan-features li:last-child {
      border-bottom: none;
    }

    .plan-features li::before {
      content: 'âœ“';
      color: #22c55e;
      font-weight: bold;
    }

    .plan-btn {
      width: 100%;
      padding: 16px 24px;
      border: none;
      border-radius: 12px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .plan-btn.primary {
      background: #1a1a1a;
      color: white;
    }

    .plan-btn.primary:hover {
      background: #333;
    }

    .plan-btn.secondary {
      background: #f5f5f5;
      color: #1a1a1a;
    }

    .plan-btn.secondary:hover {
      background: #e5e5e5;
    }

    .plan-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    /* FAQ */
    .faq-section {
      max-width: 800px;
      margin: 0 auto;
    }

    .faq-section h2 {
      text-align: center;
      font-size: 2rem;
      margin-bottom: 40px;
    }

    .faq-item {
      border-bottom: 1px solid #e5e5e5;
      padding: 20px 0;
    }

    .faq-question {
      font-weight: 600;
      font-size: 1.1rem;
      color: #1a1a1a;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .faq-answer {
      color: #666;
      margin-top: 12px;
      line-height: 1.6;
      display: none;
    }

    .faq-item.open .faq-answer {
      display: block;
    }

    /* æ”¯ä»˜å¼¹çª— */
    .payment-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.5);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }

    .payment-modal.show {
      display: flex;
    }

    .payment-content {
      background: white;
      border-radius: 20px;
      padding: 40px;
      max-width: 400px;
      width: 90%;
      text-align: center;
    }

    .payment-content h3 {
      font-size: 1.5rem;
      margin-bottom: 20px;
    }

    .payment-methods {
      display: flex;
      gap: 16px;
      margin: 24px 0;
    }

    .payment-method {
      flex: 1;
      padding: 16px;
      border: 2px solid #e5e5e5;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .payment-method:hover {
      border-color: #1a1a1a;
    }

    .payment-method.selected {
      border-color: #1a1a1a;
      background: #fafafa;
    }

    .payment-method img {
      height: 32px;
    }

    /* å“åº”å¼ */
    @media (max-width: 768px) {
      .current-membership {
        flex-direction: column;
        text-align: center;
      }

      .membership-header h1 {
        font-size: 2rem;
      }

      .plans-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <!-- å¯¼èˆªæ  -->
  <nav class="navbar">
    <div class="nav-container">
      <a href="../index.html" class="logo">
        <span class="logo-icon">ğŸ¯</span>
        <span class="logo-text">English Mastery</span>
      </a>
      <div class="nav-links">
        <a href="../index.html">é¦–é¡µ</a>
        <a href="vocabulary.html">è¯æ±‡</a>
        <a href="calendar.html">æ‰“å¡</a>
        <a href="membership.html" class="active">ä¼šå‘˜</a>
      </div>
      <div class="user-menu" id="userMenu">
        <button class="user-btn" onclick="toggleUserDropdown()">
          <span class="user-avatar" id="userAvatar">ğŸ‘¤</span>
          <span class="user-name" id="userName">ç”¨æˆ·</span>
        </button>
        <div class="user-dropdown" id="userDropdown">
          <a href="#" onclick="logout()">é€€å‡ºç™»å½•</a>
        </div>
      </div>
    </div>
  </nav>

  <main class="membership-container">
    <!-- é¡µé¢æ ‡é¢˜ -->
    <div class="membership-header">
      <h1>å‡çº§ä¼šå‘˜ï¼Œè§£é”å…¨éƒ¨åŠŸèƒ½</h1>
      <p>é€‰æ‹©é€‚åˆæ‚¨çš„å­¦ä¹ è®¡åˆ’ï¼Œ30å¤©è§è¯è‹±è¯­æ°´å¹³è´¨çš„é£è·ƒ</p>
    </div>

    <!-- å½“å‰ä¼šå‘˜çŠ¶æ€ -->
    <div class="current-membership free" id="currentMembership">
      <div class="membership-info">
        <h2>å½“å‰ï¼šå…è´¹ç”¨æˆ·</h2>
        <p id="membershipDesc">å‡çº§ä¼šå‘˜è§£é”å…¨éƒ¨å­¦ä¹ å†…å®¹</p>
      </div>
      <div class="membership-badge" id="membershipBadge">
        FREE
      </div>
    </div>

    <!-- å¥—é¤é€‰æ‹© -->
    <section class="plans-section">
      <h2>é€‰æ‹©æ‚¨çš„å­¦ä¹ è®¡åˆ’</h2>
      <div class="plans-grid">
        <!-- åŸºç¡€æœˆä»˜ -->
        <div class="plan-card">
          <div class="plan-name">åŸºç¡€ä¼šå‘˜</div>
          <div class="plan-price">
            <span class="currency">Â¥</span>
            <span class="amount">29</span>
            <span class="period">/æœˆ</span>
            <div class="original">åŸä»· Â¥39/æœˆ</div>
          </div>
          <ul class="plan-features">
            <li>å…¨éƒ¨ 900+ å•†åŠ¡è¯æ±‡</li>
            <li>å…¨éƒ¨å¬åŠ›è®­ç»ƒè¯¾ç¨‹</li>
            <li>å…¨éƒ¨é˜…è¯»ç»ƒä¹ ææ–™</li>
            <li>å…¨éƒ¨å†™ä½œç»ƒä¹ æ¨¡æ¿</li>
            <li>å­¦ä¹ è¿›åº¦äº‘åŒæ­¥</li>
          </ul>
          <button class="plan-btn secondary" onclick="selectPlan('basic_monthly')">
            ç«‹å³å¼€é€š
          </button>
        </div>

        <!-- åŸºç¡€å¹´ä»˜ -->
        <div class="plan-card popular">
          <div class="plan-name">åŸºç¡€ä¼šå‘˜ Â· å¹´ä»˜</div>
          <div class="plan-price">
            <span class="currency">Â¥</span>
            <span class="amount">199</span>
            <span class="period">/å¹´</span>
            <div class="original">åŸä»· Â¥468/å¹´ï¼Œçœ 269 å…ƒ</div>
          </div>
          <ul class="plan-features">
            <li>å…¨éƒ¨ 900+ å•†åŠ¡è¯æ±‡</li>
            <li>å…¨éƒ¨å¬åŠ›è®­ç»ƒè¯¾ç¨‹</li>
            <li>å…¨éƒ¨é˜…è¯»ç»ƒä¹ ææ–™</li>
            <li>å…¨éƒ¨å†™ä½œç»ƒä¹ æ¨¡æ¿</li>
            <li>å­¦ä¹ è¿›åº¦äº‘åŒæ­¥</li>
            <li>ä¼˜å…ˆå®¢æœæ”¯æŒ</li>
          </ul>
          <button class="plan-btn primary" onclick="selectPlan('basic_yearly')">
            ç«‹å³å¼€é€š
          </button>
        </div>

        <!-- é«˜çº§æœˆä»˜ -->
        <div class="plan-card">
          <div class="plan-name">é«˜çº§ä¼šå‘˜</div>
          <div class="plan-price">
            <span class="currency">Â¥</span>
            <span class="amount">99</span>
            <span class="period">/æœˆ</span>
            <div class="original">åŸä»· Â¥149/æœˆ</div>
          </div>
          <ul class="plan-features">
            <li>åŸºç¡€ä¼šå‘˜å…¨éƒ¨åŠŸèƒ½</li>
            <li>AI æ™ºèƒ½å†™ä½œæ‰¹æ”¹</li>
            <li>ä¸ªæ€§åŒ–å­¦ä¹ è®¡åˆ’</li>
            <li>1å¯¹1 å­¦ä¹ ç­”ç–‘</li>
            <li>ä¸“å±å­¦ä¹ ç¤¾ç¾¤</li>
          </ul>
          <button class="plan-btn secondary" onclick="selectPlan('premium_monthly')">
            ç«‹å³å¼€é€š
          </button>
        </div>

        <!-- é«˜çº§å¹´ä»˜ -->
        <div class="plan-card">
          <div class="plan-name">é«˜çº§ä¼šå‘˜ Â· å¹´ä»˜</div>
          <div class="plan-price">
            <span class="currency">Â¥</span>
            <span class="amount">799</span>
            <span class="period">/å¹´</span>
            <div class="original">åŸä»· Â¥1788/å¹´ï¼Œçœ 989 å…ƒ</div>
          </div>
          <ul class="plan-features">
            <li>åŸºç¡€ä¼šå‘˜å…¨éƒ¨åŠŸèƒ½</li>
            <li>AI æ™ºèƒ½å†™ä½œæ‰¹æ”¹</li>
            <li>ä¸ªæ€§åŒ–å­¦ä¹ è®¡åˆ’</li>
            <li>1å¯¹1 å­¦ä¹ ç­”ç–‘</li>
            <li>ä¸“å±å­¦ä¹ ç¤¾ç¾¤</li>
            <li>çº¿ä¸‹æ´»åŠ¨ä¼˜å…ˆå‚ä¸</li>
          </ul>
          <button class="plan-btn secondary" onclick="selectPlan('premium_yearly')">
            ç«‹å³å¼€é€š
          </button>
        </div>
      </div>
    </section>

    <!-- FAQ -->
    <section class="faq-section">
      <h2>å¸¸è§é—®é¢˜</h2>
      
      <div class="faq-item" onclick="toggleFaq(this)">
        <div class="faq-question">
          <span>ä¼šå‘˜å¯ä»¥é€€æ¬¾å—ï¼Ÿ</span>
          <span>+</span>
        </div>
        <div class="faq-answer">
          æ”¯æŒ 7 å¤©æ— ç†ç”±é€€æ¬¾ã€‚å¦‚æœæ‚¨åœ¨è´­ä¹°å 7 å¤©å†…å¯¹æœåŠ¡ä¸æ»¡æ„ï¼Œå¯ä»¥ç”³è¯·å…¨é¢é€€æ¬¾ã€‚
        </div>
      </div>

      <div class="faq-item" onclick="toggleFaq(this)">
        <div class="faq-question">
          <span>ä¼šå‘˜åˆ°æœŸåæ•°æ®ä¼šä¸¢å¤±å—ï¼Ÿ</span>
          <span>+</span>
        </div>
        <div class="faq-answer">
          ä¸ä¼šã€‚æ‚¨çš„å­¦ä¹ è®°å½•å’Œè¿›åº¦æ•°æ®ä¼šæ°¸ä¹…ä¿å­˜ã€‚ä¼šå‘˜åˆ°æœŸååªæ˜¯æ— æ³•è®¿é—®ä¼šå‘˜ä¸“å±å†…å®¹ï¼Œä½†åŸºç¡€åŠŸèƒ½å’Œå†å²æ•°æ®éƒ½ä¼šä¿ç•™ã€‚
        </div>
      </div>

      <div class="faq-item" onclick="toggleFaq(this)">
        <div class="faq-question">
          <span>å¦‚ä½•å‡çº§æˆ–é™çº§ä¼šå‘˜ï¼Ÿ</span>
          <span>+</span>
        </div>
        <div class="faq-answer">
          æ‚¨å¯ä»¥éšæ—¶å‡çº§ä¼šå‘˜ç­‰çº§ï¼Œå‡çº§åç«‹å³ç”Ÿæ•ˆã€‚é™çº§éœ€è¦åœ¨å½“å‰ä¼šå‘˜å‘¨æœŸç»“æŸåè‡ªåŠ¨å˜æ›´ï¼Œæˆ–è”ç³»å®¢æœå¤„ç†ã€‚
        </div>
      </div>

      <div class="faq-item" onclick="toggleFaq(this)">
        <div class="faq-question">
          <span>æ”¯æŒå“ªäº›æ”¯ä»˜æ–¹å¼ï¼Ÿ</span>
          <span>+</span>
        </div>
        <div class="faq-answer">
          ç›®å‰æ”¯æŒå¾®ä¿¡æ”¯ä»˜å’Œæ”¯ä»˜å®ä¸¤ç§æ”¯ä»˜æ–¹å¼ï¼Œæ‚¨å¯ä»¥æ ¹æ®ä¸ªäººä¹ æƒ¯é€‰æ‹©ã€‚
        </div>
      </div>
    </section>
  </main>

  <!-- æ”¯ä»˜å¼¹çª— -->
  <div class="payment-modal" id="paymentModal">
    <div class="payment-content">
      <h3>é€‰æ‹©æ”¯ä»˜æ–¹å¼</h3>
      <p id="selectedPlanInfo">åŸºç¡€ä¼šå‘˜ Â· æœˆä»˜ Â¥29</p>
      
      <div class="payment-methods">
        <div class="payment-method selected" data-method="wechat" onclick="selectPayMethod('wechat')">
          <div>ğŸ’š å¾®ä¿¡æ”¯ä»˜</div>
        </div>
        <div class="payment-method" data-method="alipay" onclick="selectPayMethod('alipay')">
          <div>ğŸ’™ æ”¯ä»˜å®</div>
        </div>
      </div>
      
      <button class="plan-btn primary" onclick="confirmPayment()" id="payBtn">
        ç¡®è®¤æ”¯ä»˜
      </button>
      <button class="plan-btn secondary" onclick="closePaymentModal()" style="margin-top: 12px;">
        å–æ¶ˆ
      </button>
    </div>
  </div>

  <!-- Toast -->
  <div class="toast" id="toast"></div>

  <script src="../js/api.js"></script>
  <script src="../js/auth.js"></script>
  <script>
    // äº§å“ä¿¡æ¯
    const PRODUCTS = {
      basic_monthly: { name: 'åŸºç¡€ä¼šå‘˜ Â· æœˆä»˜', price: 29 },
      basic_yearly: { name: 'åŸºç¡€ä¼šå‘˜ Â· å¹´ä»˜', price: 199 },
      premium_monthly: { name: 'é«˜çº§ä¼šå‘˜ Â· æœˆä»˜', price: 99 },
      premium_yearly: { name: 'é«˜çº§ä¼šå‘˜ Â· å¹´ä»˜', price: 799 }
    };

    let selectedPlan = null;
    let selectedPayMethod = 'wechat';

    // é¡µé¢åˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', async () => {
      // æ£€æŸ¥ç™»å½•çŠ¶æ€
      if (window.Auth && !Auth.isLoggedIn()) {
        window.location.href = 'auth.html';
        return;
      }

      // åŠ è½½ç”¨æˆ·ä¿¡æ¯
      loadUserInfo();

      // åŠ è½½ä¼šå‘˜çŠ¶æ€
      await loadMembershipStatus();
    });

    // åŠ è½½ç”¨æˆ·ä¿¡æ¯
    function loadUserInfo() {
      const user = Auth.getCurrentUser();
      if (user) {
        document.getElementById('userName').textContent = user.name || 'ç”¨æˆ·';
        document.getElementById('userAvatar').textContent = user.avatar || 'ğŸ‘¤';
      }
    }

    // åŠ è½½ä¼šå‘˜çŠ¶æ€
    async function loadMembershipStatus() {
      if (!window.API || !API.isLoggedIn()) return;

      try {
        const membership = await API.user.getMembership();
        updateMembershipUI(membership);
      } catch (error) {
        console.error('Failed to load membership:', error);
      }
    }

    // æ›´æ–°ä¼šå‘˜çŠ¶æ€ UI
    function updateMembershipUI(membership) {
      const container = document.getElementById('currentMembership');
      const badge = document.getElementById('membershipBadge');
      const desc = document.getElementById('membershipDesc');
      const info = container.querySelector('.membership-info h2');

      container.classList.remove('free', 'basic', 'premium');

      if (membership.level === 'premium') {
        container.classList.add('premium');
        info.textContent = 'å½“å‰ï¼šé«˜çº§ä¼šå‘˜';
        badge.textContent = 'PREMIUM';
        if (membership.end_date) {
          desc.textContent = `æœ‰æ•ˆæœŸè‡³ ${new Date(membership.end_date).toLocaleDateString()}`;
        }
      } else if (membership.level === 'basic') {
        container.classList.add('basic');
        info.textContent = 'å½“å‰ï¼šåŸºç¡€ä¼šå‘˜';
        badge.textContent = 'BASIC';
        if (membership.end_date) {
          desc.textContent = `æœ‰æ•ˆæœŸè‡³ ${new Date(membership.end_date).toLocaleDateString()}`;
        }
      } else {
        container.classList.add('free');
        info.textContent = 'å½“å‰ï¼šå…è´¹ç”¨æˆ·';
        badge.textContent = 'FREE';
        desc.textContent = 'å‡çº§ä¼šå‘˜è§£é”å…¨éƒ¨å­¦ä¹ å†…å®¹';
      }
    }

    // é€‰æ‹©å¥—é¤
    function selectPlan(planId) {
      if (!Auth.isLoggedIn()) {
        showToast('è¯·å…ˆç™»å½•', 'error');
        setTimeout(() => {
          window.location.href = 'auth.html';
        }, 1000);
        return;
      }

      selectedPlan = planId;
      const product = PRODUCTS[planId];
      document.getElementById('selectedPlanInfo').textContent = 
        `${product.name} Â¥${product.price}`;
      document.getElementById('paymentModal').classList.add('show');
    }

    // é€‰æ‹©æ”¯ä»˜æ–¹å¼
    function selectPayMethod(method) {
      selectedPayMethod = method;
      document.querySelectorAll('.payment-method').forEach(el => {
        el.classList.toggle('selected', el.dataset.method === method);
      });
    }

    // å…³é—­æ”¯ä»˜å¼¹çª—
    function closePaymentModal() {
      document.getElementById('paymentModal').classList.remove('show');
    }

    // ç¡®è®¤æ”¯ä»˜
    async function confirmPayment() {
      if (!selectedPlan) return;

      const payBtn = document.getElementById('payBtn');
      payBtn.disabled = true;
      payBtn.textContent = 'å¤„ç†ä¸­...';

      try {
        const result = await API.payment.createOrder(selectedPlan, selectedPayMethod);
        
        if (result.pay_url) {
          // è·³è½¬åˆ°æ”¯ä»˜é¡µé¢
          window.open(result.pay_url, '_blank');
          showToast('è¯·åœ¨æ–°çª—å£å®Œæˆæ”¯ä»˜', 'info');
        } else if (result.qr_code) {
          // æ˜¾ç¤ºæ”¯ä»˜äºŒç»´ç 
          showToast('è¯·ä½¿ç”¨æ‰‹æœºæ‰«ç æ”¯ä»˜', 'info');
        }

        // è½®è¯¢æ£€æŸ¥æ”¯ä»˜ç»“æœ
        pollPaymentStatus(result.order_no);

      } catch (error) {
        showToast(error.message || 'åˆ›å»ºè®¢å•å¤±è´¥', 'error');
      } finally {
        payBtn.disabled = false;
        payBtn.textContent = 'ç¡®è®¤æ”¯ä»˜';
      }
    }

    // è½®è¯¢æ”¯ä»˜çŠ¶æ€
    async function pollPaymentStatus(orderNo) {
      let attempts = 0;
      const maxAttempts = 60; // æœ€å¤šç­‰å¾… 5 åˆ†é’Ÿ

      const checkStatus = async () => {
        try {
          const order = await API.payment.getOrderDetail(orderNo);
          
          if (order.status === 'paid') {
            showToast('ğŸ‰ æ”¯ä»˜æˆåŠŸï¼', 'success');
            closePaymentModal();
            await loadMembershipStatus();
            return;
          }

          if (order.status === 'cancelled' || order.status === 'failed') {
            showToast('æ”¯ä»˜å·²å–æ¶ˆ', 'error');
            closePaymentModal();
            return;
          }

          attempts++;
          if (attempts < maxAttempts) {
            setTimeout(checkStatus, 5000);
          }
        } catch (error) {
          console.error('Check payment status failed:', error);
        }
      };

      checkStatus();
    }

    // åˆ‡æ¢ FAQ
    function toggleFaq(element) {
      element.classList.toggle('open');
      const icon = element.querySelector('.faq-question span:last-child');
      icon.textContent = element.classList.contains('open') ? 'âˆ’' : '+';
    }

    // ç”¨æˆ·ä¸‹æ‹‰èœå•
    function toggleUserDropdown() {
      const dropdown = document.getElementById('userDropdown');
      dropdown.classList.toggle('show');
    }

    // Toast æç¤º
    function showToast(message, type = 'info') {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.className = `toast ${type} show`;
      setTimeout(() => toast.classList.remove('show'), 3000);
    }

    // å…³é—­ä¸‹æ‹‰èœå•
    document.addEventListener('click', (e) => {
      if (!e.target.closest('.user-menu')) {
        document.getElementById('userDropdown').classList.remove('show');
      }
    });
  </script>
</body>
</html>
