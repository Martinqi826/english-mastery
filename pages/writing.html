<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å†™ä½œç»ƒä¹  - English Mastery</title>
  <link rel="stylesheet" href="../css/styles.css">
  <style>
    .writing-container { display: grid; grid-template-columns: 1fr 1fr; gap: var(--spacing-xl); }
    @media (max-width: 1024px) { .writing-container { grid-template-columns: 1fr; } }
    .prompt-card { background: var(--bg-primary); border-radius: var(--radius-lg); padding: var(--spacing-xl); box-shadow: var(--shadow-md); }
    .prompt-title { font-size: 1.25rem; font-weight: 600; margin-bottom: var(--spacing-md); }
    .prompt-description { color: var(--text-secondary); margin-bottom: var(--spacing-lg); line-height: 1.6; }
    .prompt-requirements { background: var(--bg-tertiary); padding: var(--spacing-md); border-radius: var(--radius-md); margin-bottom: var(--spacing-lg); }
    .prompt-requirements h4 { font-size: 0.875rem; font-weight: 600; margin-bottom: var(--spacing-sm); }
    .prompt-requirements ul { margin: 0; padding-left: var(--spacing-lg); font-size: 0.875rem; color: var(--text-secondary); }
    .editor-card { background: var(--bg-primary); border-radius: var(--radius-lg); overflow: hidden; box-shadow: var(--shadow-md); }
    .editor-header { padding: var(--spacing-md) var(--spacing-lg); background: var(--bg-tertiary); display: flex; justify-content: space-between; align-items: center; }
    .editor-textarea { width: 100%; min-height: 400px; padding: var(--spacing-lg); border: none; font-size: 1rem; line-height: 1.8; resize: vertical; }
    .editor-textarea:focus { outline: none; }
    .editor-footer { padding: var(--spacing-md) var(--spacing-lg); background: var(--bg-tertiary); display: flex; justify-content: space-between; align-items: center; }
    .feedback-section { background: var(--bg-primary); border-radius: var(--radius-lg); padding: var(--spacing-xl); margin-top: var(--spacing-lg); }
    .score-circle { width: 60px; height: 60px; border-radius: 50%; background: var(--success-color); display: flex; align-items: center; justify-content: center; font-size: 1.5rem; font-weight: 700; color: white; }
    .feedback-item { padding: var(--spacing-md); border-left: 3px solid var(--primary-color); background: var(--bg-tertiary); margin-bottom: var(--spacing-md); border-radius: 0 var(--radius-md) var(--radius-md) 0; }
    .feedback-item.success { border-color: var(--success-color); }
    .feedback-item.warning { border-color: var(--warning-color); }
  </style>
</head>
<body>
  <div class="page-wrapper">
    <header class="header"><div class="container"><div class="header-content"><div class="logo"><span class="logo-icon">ğŸ¯</span><span>English Mastery</span></div><div class="day-badge" id="dayBadge">Day 1 / 30</div></div></div></header>
    <nav class="nav"><div class="container"><ul class="nav-list">
      <li class="nav-item"><a href="../index.html" class="nav-link"><span>ğŸ“Š</span> ä»ªè¡¨ç›˜</a></li>
      <li class="nav-item"><a href="vocabulary.html" class="nav-link"><span>ğŸ“–</span> è¯æ±‡å­¦ä¹ </a></li>
      <li class="nav-item"><a href="listening.html" class="nav-link"><span>ğŸ‘‚</span> å¬åŠ›è®­ç»ƒ</a></li>
      <li class="nav-item"><a href="reading.html" class="nav-link"><span>ğŸ“š</span> é˜…è¯»ç»ƒä¹ </a></li>
      <li class="nav-item"><a href="writing.html" class="nav-link active"><span>âœï¸</span> å†™ä½œç»ƒä¹ </a></li>
      <li class="nav-item"><a href="test.html" class="nav-link"><span>ğŸ¯</span> æµ‹è¯•è¯„ä¼°</a></li>
      <li class="nav-item"><a href="calendar.html" class="nav-link"><span>ğŸ“…</span> æ‰“å¡æ—¥å†</a></li>
    </ul></div></nav>
    <main class="main-content">
      <div class="container">
        <h1 style="margin-bottom: var(--spacing-lg);">âœï¸ å†™ä½œç»ƒä¹ </h1>
        <div class="writing-container">
          <div class="prompt-card">
            <div class="prompt-title">ğŸ“ å†™ä½œä»»åŠ¡</div>
            <div class="prompt-description">Write a professional self-introduction email to send to a new team when joining a company. Include your background, expertise, and what you hope to contribute.</div>
            <div class="prompt-requirements">
              <h4>âœ… è¦æ±‚</h4>
              <ul><li>å­—æ•°ï¼š150-200è¯</li><li>ä½¿ç”¨æ­£å¼å•†åŠ¡è¯­è¨€</li><li>åŒ…å«é—®å€™è¯­å’Œç»“æŸè¯­</li><li>æåŠä¸“ä¸šèƒŒæ™¯</li></ul>
            </div>
            <div class="prompt-requirements" style="background: #EFF6FF;">
              <h4>ğŸ’¡ æç¤ºè¯æ±‡</h4>
              <ul><li><strong>background</strong> - èƒŒæ™¯</li><li><strong>expertise</strong> - ä¸“ä¸šçŸ¥è¯†</li><li><strong>collaborate</strong> - åˆä½œ</li><li><strong>contribute</strong> - è´¡çŒ®</li></ul>
            </div>
          </div>
          <div class="editor-card">
            <div class="editor-header"><span>âœï¸ å†™ä½œåŒºåŸŸ</span><span>å­—æ•°: <span id="wordCount">0</span>/200</span></div>
            <textarea class="editor-textarea" id="writingEditor" placeholder="Subject: Introduction...&#10;&#10;Dear Team,&#10;&#10;..." oninput="updateWordCount()"></textarea>
            <div class="editor-footer">
              <span id="saveStatus">æœªä¿å­˜</span>
              <button class="btn btn-primary" onclick="submitWriting()">æäº¤ä½œæ–‡</button>
            </div>
          </div>
        </div>
        <div class="feedback-section hidden" id="feedbackSection">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-lg);">
            <h3>ğŸ“Š å†™ä½œåé¦ˆ</h3>
            <div style="display: flex; align-items: center; gap: var(--spacing-md);"><div class="score-circle">85</div><div><div style="font-weight: 600;">ä¼˜ç§€</div></div></div>
          </div>
          <div class="feedback-item success"><div style="font-weight: 600;">âœ… ç»“æ„å®Œæ•´</div><div style="font-size: 0.875rem;">æ–‡ç« ç»“æ„æ¸…æ™°å®Œæ•´ã€‚</div></div>
          <div class="feedback-item warning"><div style="font-weight: 600;">ğŸ’¡ å»ºè®®</div><div style="font-size: 0.875rem;">å¯å¢åŠ æ›´å¤šå…·ä½“ç»éªŒæè¿°ã€‚</div></div>
          <div style="text-align: center; margin-top: var(--spacing-xl);"><button class="btn btn-primary btn-lg" onclick="location.href='../index.html'">è¿”å›ä»ªè¡¨ç›˜</button></div>
        </div>
      </div>
    </main>
  </div>
  <script src="../js/storage.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const currentDay = Storage.getCurrentDay();
      document.getElementById('dayBadge').textContent = `Day ${currentDay} / 30`;
    });
    function updateWordCount() {
      const text = document.getElementById('writingEditor').value;
      const words = text.trim().split(/\s+/).filter(w => w.length > 0).length;
      document.getElementById('wordCount').textContent = words;
    }
    function submitWriting() {
      const text = document.getElementById('writingEditor').value;
      const words = text.trim().split(/\s+/).filter(w => w.length > 0).length;
      if (words < 50) { alert('è¯·è‡³å°‘å†™50è¯'); return; }
      Storage.updateTodayTask('writing', true);
      Storage.addStudyTime(20);
      const progress = Storage.getProgress();
      progress.writing = Math.min(100, (progress.writing || 32) + 2);
      Storage.setProgress(progress);
      document.getElementById('feedbackSection').classList.remove('hidden');
    }
  </script>
</body>
</html>
